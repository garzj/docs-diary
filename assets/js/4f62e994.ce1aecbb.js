"use strict";(self.webpackChunkdocs_garz_dev=self.webpackChunkdocs_garz_dev||[]).push([[4836],{7910:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var i=s(4848),t=s(8453);const r={},o="VLANs and trunking",c={id:"os/cisco/vlans-trunking",title:"VLANs and trunking",description:"Configuring VLANs and trunking on a Cisco device.",source:"@site/docs/os/cisco/030_vlans-trunking.md",sourceDirName:"os/cisco",slug:"/os/cisco/vlans-trunking",permalink:"/os/cisco/vlans-trunking",draft:!1,unlisted:!1,editUrl:"https://github.com/garzj/docs-diary/edit/master/docs/os/cisco/030_vlans-trunking.md",tags:[],version:"current",lastUpdatedBy:"garzj",sidebarPosition:30,frontMatter:{},sidebar:"autoSidebar",previous:{title:"IP addressing",permalink:"/os/cisco/ip-addressing"},next:{title:"Gateways and routing",permalink:"/os/cisco/routing_gateways"}},a={},l=[{value:"Terminology",id:"terminology",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Switches",id:"switches",level:3},{value:"VLAN interface config",id:"vlan-interface-config",level:4},{value:"Access ports",id:"access-ports",level:4},{value:"Trunking ports",id:"trunking-ports",level:4},{value:"Other switchport modes",id:"other-switchport-modes",level:3},{value:"Routers",id:"routers",level:3},{value:"Voice VLANs",id:"voice-vlans",level:2},{value:"Evaluation",id:"evaluation",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"vlans-and-trunking",children:"VLANs and trunking"}),"\n",(0,i.jsx)(e.p,{children:"Configuring VLANs and trunking on a Cisco device."}),"\n",(0,i.jsx)(e.h2,{id:"terminology",children:"Terminology"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Standard VLAN"}),": The default VLAN with an id of 1"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Native VLAN"}),": The VLAN used for untagged traffic (default is standard)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Data VLAN"}),": Seperated VLAN to ensure secure data transfer"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Management VLAN"}),": A VLAN exclusively for network administration (SSH, telnet, SNMP)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Voice VLAN"}),": A seperate VLAN for voice traffic"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Tagged / Untagged"}),": VLAN tags specify which VLAN a packet belongs to"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Access ports"}),": Ports tagging incoming packets to belong to a VLAN (allow a single VLAN)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Trunking ports"}),": Ports that receive tagged packets (allow multiple VLANs)"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cisco-ios",children:"! Create a vlan (can also be implicitly created on usage)\nvlan 42\n  name Production\n"})}),"\n",(0,i.jsx)(e.h3,{id:"switches",children:"Switches"}),"\n",(0,i.jsx)(e.h4,{id:"vlan-interface-config",children:"VLAN interface config"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cisco-ios",children:"interface vlan 42\n  ip address 192.168.0.254 255.255.255.0\n  no shutdown\n"})}),"\n",(0,i.jsx)(e.h4,{id:"access-ports",children:"Access ports"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cisco-ios",children:"interface fa0/1\n  switchport mode access\n  switchport access vlan 42\n"})}),"\n",(0,i.jsx)(e.h4,{id:"trunking-ports",children:"Trunking ports"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cisco-ios",children:"interface fa0/1\n  switchport mode trunk\n  switchport trunk native vlan 99\n  switchport trunk allowed vlan 10,20,30\n"})}),"\n",(0,i.jsx)(e.h3,{id:"other-switchport-modes",children:"Other switchport modes"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cisco-ios",metastring:'title="config-if#"',children:"! Enable dynamic trunking\nswitchport mode dynamic auto\n\n! Desire turning into a trunk\nswitchport mode dynamic desirable\n\n! Disable dynamic trunking (no DTP frames)\nswitchport nonegotiate\n"})}),"\n",(0,i.jsx)(e.h3,{id:"routers",children:"Routers"}),"\n",(0,i.jsx)(e.p,{children:"On a router trunking is done via subinterfaces."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cisco-ios",children:"! The base interface has to be enabled\ninterface gi0/0/0\n  no shutdown\n\ninterface gi0/0/0.42\n  description The subinterface for VLAN 42\n  encapsulation dot1Q 42\n  no shutdown\n"})}),"\n",(0,i.jsx)(e.p,{children:"Typically one would only configure these on interfaces connected to a switch. Preserving VLAN tags between routers is unnecessary in most cases."}),"\n",(0,i.jsx)(e.h2,{id:"voice-vlans",children:"Voice VLANs"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cisco-ios",children:"vlan 10\n  name Financing\n\nvlan 100\n  name Voice\n\ninterface fa0/18\n  switchport mode access\n  switchport access vlan 10\n\n  ! Enables qos classification for IP phones\n  mls qos trust cos\n  switchport voice vlan 100\n"})}),"\n",(0,i.jsx)(e.h2,{id:"evaluation",children:"Evaluation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cisco-ios",metastring:'title="#"',children:"show vlan brief\n\nshow vlan summary\n"})})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function o(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);