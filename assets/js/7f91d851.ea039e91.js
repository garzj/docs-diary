"use strict";(self.webpackChunkdocs_garz_dev=self.webpackChunkdocs_garz_dev||[]).push([[1316],{6410:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var s=i(4848),t=i(8453);const a={},o="NAT",l={id:"os/cisco/nat",title:"NAT",description:"Configuring static NAT and NAT and PAT pools on a cisco device.",source:"@site/docs/os/cisco/100_nat.md",sourceDirName:"os/cisco",slug:"/os/cisco/nat",permalink:"/os/cisco/nat",draft:!1,unlisted:!1,editUrl:"https://github.com/garzj/docs-diary/edit/master/docs/os/cisco/100_nat.md",tags:[],version:"current",lastUpdatedBy:"garzj",sidebarPosition:100,frontMatter:{},sidebar:"autoSidebar",previous:{title:"Access lists",permalink:"/os/cisco/acls"},next:{title:"IPSec",permalink:"/os/cisco/ipsec"}},r={},c=[{value:"Features",id:"features",level:2},{value:"Terminology",id:"terminology",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Basic",id:"basic",level:3},{value:"Static NAT",id:"static-nat",level:3},{value:"Dynamic NAT",id:"dynamic-nat",level:3},{value:"Define translated hosts",id:"define-translated-hosts",level:4},{value:"PAT on one output interface",id:"pat-on-one-output-interface",level:4},{value:"NAT/PAT with address pool",id:"natpat-with-address-pool",level:4},{value:"Evaluation",id:"evaluation",level:2},{value:"Example output",id:"example-output",level:3}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"nat",children:"NAT"}),"\n",(0,s.jsx)(e.p,{children:"Configuring static NAT and NAT and PAT pools on a cisco device."}),"\n",(0,s.jsx)(e.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Outgoing traffic"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Replaces inside local IP and port with inside global IP and unique port"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Incoming responses"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Translates inside global IP and port back to the original inside local IP and port"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Session mapping"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Creates a translation entry for each new session"}),"\n",(0,s.jsx)(e.li,{children:"Utilizes NAT table for bidirectional flow handling"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"terminology",children:"Terminology"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"NAT"}),": Network address translation (assign different global addresses on hosts)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"PAT"}),": Port address translation (multiple hosts using the same global address / address pool)"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(e.h3,{id:"basic",children:"Basic"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cisco-ios",children:"! Define outside interface(s) (facing to the internet)\ninterface GigabitEthernet0/1\n  ip nat outside\n\n! Define inside interface(s) (origin of traffic)\n! Can also be VLAN interfaces\ninterface GigabitEthernet0/0.10\n  encapsulation dot1Q 10\n  ip address 192.168.10.1 255.255.255.0\n  ip nat inside\n  no shutdown\ninterface GigabitEthernet0/0.20\n  encapsulation dot1Q 20\n  ip address 192.168.20.1 255.255.255.0\n  ip nat inside\n  no shutdown\n"})}),"\n",(0,s.jsx)(e.h3,{id:"static-nat",children:"Static NAT"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cisco-ios",children:"! Assign a global IP to a local device\nip nat inside source static 192.168.20.5 213.174.240.143\n"})}),"\n",(0,s.jsx)(e.h3,{id:"dynamic-nat",children:"Dynamic NAT"}),"\n",(0,s.jsx)(e.h4,{id:"define-translated-hosts",children:"Define translated hosts"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cisco-ios",children:"! The ACL defines, which source addresses get translated\nip access-list extended nat-inside-in\n  permit ip 192.168.10.0 0.0.0.255 any\n  permit ip 192.168.20.0 0.0.0.255 any\n"})}),"\n",(0,s.jsx)(e.h4,{id:"pat-on-one-output-interface",children:"PAT on one output interface"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cisco-ios",children:"ip nat inside source list nat-inside-in interface GigabitEthernet0/1 overload\n"})}),"\n",(0,s.jsx)(e.h4,{id:"natpat-with-address-pool",children:"NAT/PAT with address pool"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cisco-ios",children:"ip nat pool my-nat-pool 213.174.240.128 213.174.240.142 netmask 255.255.255.240\n\n! Either do NAT\nip nat inside source list nat-inside-in pool my-nat-pool\n! or PAT with overload\nip nat inside source list nat-inside-in pool my-nat-pool overload\n"})}),"\n",(0,s.jsx)(e.h2,{id:"evaluation",children:"Evaluation"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cisco-ios",children:"! Show current translations\nshow ip nat translations\n"})}),"\n",(0,s.jsx)(e.h3,{id:"example-output",children:"Example output"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Pro  Inside global            Inside local       Outside local      Outside global\nicmp 11.174.231.225:1         10.40.0.2:1        11.174.231.226:1   11.174.231.226:1\nicmp 11.174.231.225:5         10.40.0.1:5        11.174.231.226:5   11.174.231.226:5\nicmp 11.174.231.225:8         10.40.0.1:8        11.174.231.226:8   11.174.231.226:8\n"})})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>l});var s=i(6540);const t={},a=s.createContext(t);function o(n){const e=s.useContext(a);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),s.createElement(a.Provider,{value:e},n.children)}}}]);