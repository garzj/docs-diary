"use strict";(self.webpackChunkdocs_garz_dev=self.webpackChunkdocs_garz_dev||[]).push([[4464],{3703:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});var l=n(4848),i=n(8453);const t={},a="MySQL",r={id:"os/linux/arch/mysql",title:"MySQL",description:"Install mysql, not mariadb",source:"@site/docs/os/linux/arch/mysql.md",sourceDirName:"os/linux/arch",slug:"/os/linux/arch/mysql",permalink:"/os/linux/arch/mysql",draft:!1,unlisted:!1,editUrl:"https://github.com/garzj/docs-diary/edit/master/docs/os/linux/arch/mysql.md",tags:[],version:"current",lastUpdatedBy:"garzj",frontMatter:{},sidebar:"autoSidebar",previous:{title:"Arch",permalink:"/category/arch"},next:{title:"Installing Manjaro on my Dell XPS 15",permalink:"/os/linux/arch/xps-15-installing-manjaro"}},o={},c=[{value:"Install <code>mysql</code>, not <code>mariadb</code>",id:"install-mysql-not-mariadb",level:2},{value:"Compile the AUR package",id:"compile-the-aur-package",level:3},{value:"Install my pre-compiled binaries",id:"install-my-pre-compiled-binaries",level:3},{value:"Additional tooling",id:"additional-tooling",level:3},{value:"Initialization issues",id:"initialization-issues",level:2},{value:"Secure the installation",id:"secure-the-installation",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h1,{id:"mysql",children:"MySQL"}),"\n",(0,l.jsxs)(s.h2,{id:"install-mysql-not-mariadb",children:["Install ",(0,l.jsx)(s.code,{children:"mysql"}),", not ",(0,l.jsx)(s.code,{children:"mariadb"})]}),"\n",(0,l.jsx)(s.h3,{id:"compile-the-aur-package",children:"Compile the AUR package"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"git clone https://aur.archlinux.org/mysql.git/\ncd mysql\nmakepkg -si\n"})}),"\n",(0,l.jsxs)(s.p,{children:["The reason I've done that is because tools like ",(0,l.jsx)(s.code,{children:"pacman"})," install ",(0,l.jsx)(s.code,{children:"mariadb"})," instead, which should work just the same, but our teacher is an Oracle fan wants us to use pure ",(0,l.jsx)(s.code,{children:"mysql"})," instead."]}),"\n",(0,l.jsx)(s.h3,{id:"install-my-pre-compiled-binaries",children:"Install my pre-compiled binaries"}),"\n",(0,l.jsx)(s.p,{children:"This should be a lot faster than compiling from scratch..."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"wget https://garz.dev/bin/gpl/mysql-clients-8.0.31-1-x86_64.pkg.tar.zst https://garz.dev/bin/gpl/mysql-8.0.31-1-x86_64.pkg.tar.zst https://garz.dev/bin/gpl/libmysqlclient-8.0.31-1-x86_64.pkg.tar.zst\nsudo pacman -U libmysqlclient-8.0.31-1-x86_64.pkg.tar.zst mysql-clients-8.0.31-1-x86_64.pkg.tar.zst mysql-8.0.31-1-x86_64.pkg.tar.zst\n"})}),"\n",(0,l.jsxs)(s.p,{children:["Now add those to ",(0,l.jsx)(s.code,{children:"IgnorePkg"})," in ",(0,l.jsx)(s.code,{children:"/etc/pacman.conf"}),": ",(0,l.jsx)(s.code,{children:"mysql libmysqlclient mysql-clients"})]}),"\n",(0,l.jsx)(s.h3,{id:"additional-tooling",children:"Additional tooling"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"sudo pacman -S mysql-workbench\n"})}),"\n",(0,l.jsx)(s.h2,{id:"initialization-issues",children:"Initialization issues"}),"\n",(0,l.jsxs)(s.p,{children:["I had permission issues, when runnning ",(0,l.jsx)(s.code,{children:"systemctl start mysqld"})," and figured, I could fix them by reinitializing ",(0,l.jsx)(s.code,{children:"mysqld"})," as the ",(0,l.jsx)(s.code,{children:"mysql"})," user:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"cd /var/lib\nsudo rm -rf mysql\nsudo mkdir mysql\nsudo chown mysql:mysql mysql\nsudo -u mysql bash\n  cd mysql\n  mysqld --initialize # Copied the temporary password\n  exit\nsystemctl start mysqld\nsystemctl enable mysqld\n"})}),"\n",(0,l.jsx)(s.h2,{id:"secure-the-installation",children:"Secure the installation"}),"\n",(0,l.jsxs)(s.p,{children:["I ran ",(0,l.jsx)(s.code,{children:"mysql_secure_installation"})," with the following config:"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Entered temporary password, set a new one"}),"\n",(0,l.jsxs)(s.li,{children:["Remove anonymouse users: ",(0,l.jsx)(s.code,{children:"y"})]}),"\n",(0,l.jsxs)(s.li,{children:["Disallow root login remotely: ",(0,l.jsx)(s.code,{children:"n"})]}),"\n",(0,l.jsxs)(s.li,{children:["Remove test database and access to it: ",(0,l.jsx)(s.code,{children:"y"})]}),"\n",(0,l.jsxs)(s.li,{children:["Reload privilege tables now: ",(0,l.jsx)(s.code,{children:"y"})]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>r});var l=n(6540);const i={},t=l.createContext(i);function a(e){const s=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),l.createElement(t.Provider,{value:s},e.children)}}}]);